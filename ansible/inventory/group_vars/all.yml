# Global variables for all hosts
---

# =============================================================================
# SIB Central Server Configuration
# =============================================================================

sib_server: "192.168.1.163"
sib_loki_url: "http://{{ sib_server }}:3100"
sib_prometheus_url: "http://{{ sib_server }}:9090"

# =============================================================================
# Docker Configuration (Static Binary Installation)
# =============================================================================

docker_static_version: "24.0.7"

# Install Docker if not present? (using static binaries)
# If false and Docker is missing, will fall back to native packages
install_docker_if_missing: true

# =============================================================================
# Deployment Strategy
# =============================================================================
# auto   - Detect Docker, use containers if available, native if not
# docker - Force Docker containers (will install Docker if missing)
# native - Force native packages (no Docker required)
deployment_strategy: native

# =============================================================================
# Falco Configuration
# =============================================================================

falco_version: "0.39.2"
falco_priority: "notice"  # debug, info, notice, warning, error, critical

# Custom rules to deploy (from detection/config/rules/)
falco_custom_rules:
  - custom_rules.yaml

# Falco outputs - send to central Falcosidekick
falco_outputs:
  http_enabled: true
  http_url: "http://{{ sib_server }}:2801"

# =============================================================================
# Alloy Configuration (Log & Metrics Shipper)
# =============================================================================

alloy_version: "v1.5.1"

# Alloy deployment method: auto (uses deployment_strategy), docker, or native
alloy_deployment: auto

# What to collect
alloy_collect_logs: true
alloy_collect_metrics: true
alloy_collect_docker_logs: true
alloy_collect_journal: true

# Metric scrape targets (local to each host)
alloy_scrape_targets:
  - job: node
    port: 9100
    metrics_path: /metrics

# =============================================================================
# Common Settings
# =============================================================================

# Timezone for all hosts
timezone: "UTC"

# Package manager (auto-detected, but can override)
# package_manager: apt  # or yum, dnf

# Docker settings
docker_network: "sib-fleet"

# Logging
log_level: info
